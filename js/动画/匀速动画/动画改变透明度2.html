<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>改变透明度</title>
	<style>
		#div1{
			width: 100px;
			height: 100px;
			background: red;
			opacity: 0.3;
		}
	</style>
<script>
	var timer=null;
	function animation(obj,target){  //obj是要改变的是哪个元素,target是目标值
			// obj.style.opacity=target;
		clearInterval(timer);
		timer=setInterval(function(){
			var curr=getComputedStyle(obj,false)['opacity']*100;  //取出的是一个字符串
			if(curr<=target){    //透明度写成百分比形式
				speed=10;
			}else{
				speed=-10;
			}
			if(Math.abs(target-curr)<Math.abs(speed)){
				obj.style.opacity=target/100;
				clearInterval(timer);
			}else{
				obj.style.opacity=(curr+speed)/100;
			}
		},30)
	}
	window.onload=function(){
		var odiv1=document.getElementById('div1');
		odiv1.onmouseover=function(){
			animation(odiv1,100);
		}
		odiv1.onmouseout=function(){
			animation(odiv1,30);
		}
	}
</script>
</head>
<body>
	<div id="div1"></div>
</body>
</html>