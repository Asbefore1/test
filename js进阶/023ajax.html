<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>023ajax.html</title>
</head>
<body>
	<input type="button" id="btn" value="获取数据">
</body>
<script>
	var oBtn=document.getElementById('btn');
	oBtn.onclick=function(){
		//1.创建ajax对象
		var oAjax=new XMLHttpRequest();   
		console.log('after new::',oAjax.readyState); 
					//oAjax.readyState指的是返回XMLHTTP请求的当前状态
					// 0 还没有初始化
	                // 1 已经初始化，但是还没有调用open方法
	                // 2 send方法已经调用
	                // 3 返回了部分数据
	                // 4 数据完全返回

		//2.用ajax对象建立连接
		oAjax.open('GET','http://127.0.0.1:3000/022data.txt',true); 
					//(用什么方法,请求的地址,是否异步)
		console.log('after open::',oAjax.readyState);


		//3.发送请求
		oAjax.send();  
		console.log('after send::',oAjax.readyState);


		//4.用ajax对象接收数据
		oAjax.onreadystatechange=function(){  
			console.log('in event::',oAjax.readyState); 

			if(oAjax.readyState==4){
				console.log(oAjax.status);
				if(oAjax.status==200){
					console.log('get data success::',oAjax.responseText);
				}else{
					console.log('get data faild::',oAjax.status);
				}
				
			}
		}
	}
</script>
</html>